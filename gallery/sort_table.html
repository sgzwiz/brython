<!doctype html>
<html>
<meta charset="iso-8859-1">
<head>
<style>
body,td,th{font-family:sans-serif}
a.sort_link{margin-left:10px;text-decoration:none}
</style>

<script src="../py2js.js"></script>
<script src="../py_utils.js"></script>
<script src="../py_classes.js"></script>
<script src="../py_import.js"></script>
<script src="../py_list.js"></script>
<script src="../py_string.js"></script>
<script src="../py_dom.js"></script>

<script src="../py_ajax.js"></script>

</head>
<body onLoad="brython(1)">
<script id="ascript" type="text/python">
import time

t0 = time.time()

orders = {}

doc <= IMG(src="../../brython.png")

def sort_by_col(cell,numeric=False):
    th_elt = cell.parent # TH cell
    for i,th in enumerate(title.children):
        if th==th_elt:
            col_num = i
            break
    if col_num not in orders:
        if numeric:
            orders[col_num]='down'
        else:
            orders[col_num]='up'
    elif orders[col_num]=='up':
        orders[col_num]='down'
    else:
        orders[col_num]='up'
    ascending = orders[col_num]

    def k_str(_item):
        return _item.children[col_num].text
    def k_int(_item):
        return float(_item.children[col_num].text)

    if not numeric:
        func = k_str
    else:
        func = k_int

    rows.sort(key=func)

    if ascending == 'down':
        rows.reverse()

    for i in range(len(rows)):
        t <= rows[i]

lines = ['Allemagne','Berlin',357026,81.8,
'Autriche','Vienne',83871,8.40,
'Belgique','Bruxelles',30518,10.91,
'Bulgarie','Sofia',110944,7.50,
'Chypre','Nicosie',9251,0.80,
'Danemark','Copenhague',43098,5.56,
'Espagne','Madrid',505997,46.15,
'Estonie','Tallinn',43698,1.34,
'Finlande','Helsinki',338144,5.37,
'France','Paris',544000,65.07,
'Grèce','Athènes',131625,11.32,
'Hongrie','Budapest',93029,9.98,
'Irlande','Dublin',69797,4.48,
'Italie','Rome',301336,60.62,
'Lettonie','Riga',64589,2.22,
'Lituanie','Vilnius',62678,3.24,
'Luxembourg','Luxembourg',2586,0.51,
'Malte','La Valette',315,0.41,
'Pays-Bas','Amsterdam',41528,16.65,
'Pologne','Varsovie',312685,38.20,
'Portugal','Lisbonne',91946,10.63,
'République tchèque','Prague',78867,10.53,
'Roumanie','Bucarest',238391,21.41,
'Royaume-Uni','Londres',243820,62.43,
'Slovaquie','Bratislava',49034,5.43,
'Slovénie','Ljubljana',20273,2.05,
'Suède','Stockholm',441369,9.41]

doc <= H2("Pays d'Europe")

table = TABLE()
t = TBODY()
title = TR()
link = BUTTON('\u2191\u2193',onClick="sort_by_col(this)")
link_num = BUTTON('\u2191\u2193',onClick="sort_by_col(this,true)")
link1 = link.clone()
title <= TH('Pays'+link)
title <= TH('Capitale'+link.clone())
title <= TH('Superficie'+link_num)
title <= TH('Population'+link_num.clone())
t <= title

rows = []
for i in range(len(lines)/4):
    row = TR()
    for j in range(2):
        row <= TD(lines[4*i+j])
    for j in range(2,4):
        row <= TD(lines[4*i+j],align="right")
    rows.append(row)

for row in rows:
    t <= row

table <= t
doc <= table

foot = P()+I('Ecrit en '+A('Brython',href="http://www.brython.info"))

doc <= foot

</script>
</body>
</html>