<html>
<head>
<script src="brython.js"></script>
</head>

<body onLoad="brython()">
<img src="../brython.png">
<p>

<script type="text/python">
import time
import math
import datetime

w,h = 250,250
ray = 100

def needle(angle,r1,r2,color="#000000"):
    x1 = w/2-ray*math.cos(angle)*r1
    y1 = h/2-ray*math.sin(angle)*r1
    x2 = w/2+ray*math.cos(angle)*r2
    y2 = h/2+ray*math.sin(angle)*r2
    ctx.beginPath()
    ctx.strokeStyle = color
    ctx.moveTo(x1,y1)
    ctx.lineTo(x2,y2)
    ctx.stroke()


def set_clock():
    ctx.beginPath()
    ctx.fillStyle = "#FFF"
    ctx.arc(w/2,h/2,ray*0.89,0,2*math.pi)
    ctx.fill()
    show_hours()
    now = datetime.datetime.now()
    day = now.day
    ctx.font = "bold 14px Arial"
    ctx.textAlign = "center"
    ctx.textBaseline = "middle"
    ctx.fillStyle="#FFF"
    ctx.fillText(day,w*0.7,h*0.5)
    
    ctx.lineWidth = 3
    hour = now.hour % 12
    angle = hour*2*math.pi/12 - math.pi/2
    needle(angle,0.05,0.5)
    minute = now.minute
    angle = minute*2*math.pi/60 - math.pi/2
    needle(angle,0.05,0.85)
    ctx.lineWidth = 1
    second = now.second+now.microsecond/1000000
    angle = second*2*math.pi/60 - math.pi/2
    needle(angle,0.05,0.85,"#FF0000")
    
time.set_interval(set_clock,100)

canvas = doc["clock"]
ctx = canvas.getContext("2d")

ctx.beginPath()
ctx.lineWidth = 10
ctx.arc(w/2,h/2,ray,0,2*math.pi)
ctx.stroke()

for i in range(60):
    ctx.lineWidth = 1
    if i%5 == 0:
        ctx.lineWidth = 3
    angle = i*2*math.pi/60 - math.pi/3
    x1 = w/2+ray*math.cos(angle)
    y1 = h/2+ray*math.sin(angle)
    x2 = w/2+ray*math.cos(angle)*0.9
    y2 = h/2+ray*math.sin(angle)*0.9
    ctx.beginPath()
    ctx.moveTo(x1,y1)
    ctx.lineTo(x2,y2)
    ctx.stroke()

def show_hours():
    ctx.beginPath()
    ctx.arc(w/2,h/2,ray*0.05,0,2*math.pi)
    ctx.fillStyle = "#000"
    ctx.fill()
    for i in range(1,13):
        angle = i*math.pi/6-math.pi/2
        x3 = w/2+ray*math.cos(angle)*0.75
        y3 = h/2+ray*math.sin(angle)*0.75
        ctx.font = "20px Arial"
        ctx.textAlign = "center"
        ctx.textBaseline = "middle"
        ctx.fillText(i,x3,y3)
    # cell for hour
    ctx.fillStyle = "#000"
    ctx.fillRect(w*0.65,h*0.47,w*0.1,h*0.06)
show_hours()

</script>

<p>
<canvas width="250" height="250" id="clock">
Your browser doesn't support Canvas
</canvas>

</body>
</html> 