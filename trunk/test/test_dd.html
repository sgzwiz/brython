<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<script src="../py_tokenizer.js"></script>
<script src="../py_utils.js"></script>
<script src="../py_classes.js"></script>
<script src="../py_dom.js"></script>
<script src="../py_ajax.js"></script>
<script src="../py2js.js"></script>

</head>
<body onLoad="brython()">
<script type="text/brython">
items = ['uno','due','tre']
ids = []

left = DIV()
left.style= {'position':'absolute','left':100,'top':50,'width':100,'height':200,
    'backgroundColor':'yellow',
    'borderStyle':'dotted','borderColor':'red','borderWidth':0}
right = DIV()
right.style = {'position':'absolute','left':300,'top':50,'width':100,'height':200,
    'backgroundColor':'yellow',
    'borderStyle':'dotted','borderColor':'red','borderWidth':0}

right2 = DIV()
right2.style = {'position':'absolute','left':500,'top':50,'width':100,'height':200,
    'backgroundColor':'green',
    'borderStyle':'dotted','borderColor':'yellow','borderWidth':0}

doc <= right+right2

def drag_start(ev):
    ev.data['text']=ev.target.id
    ev.data.effectAllowed = 'move'
    
for i,_item in enumerate(items):
    x = SPAN(_item,draggable=True)
    x.style = {'position':'absolute','left':10,'top':10+30*i,'width':30,'height':25,
        'fontFamily':'Arial','fontSize':20}
    x.ondragstart = drag_start
    left <= x
    ids.append(x.id)

doc <= left+right

def enter(ev):
    ev.target.style.borderWidth = 2

def drag_over(ev):
    ev.data.dropEffect = 'move'
    ev.preventDefault()
    
def leave(ev):
    ev.target.style.borderWidth = 0
    
def drop(ev):
    ev.preventDefault()
    if ev.target==right and ev.data['text'] not in ids:
        return
    elif ev.target==right2 and ev.data['text'] not in ids[:2]:
        return
    elt = doc[ev.data['text']]
    ev.target <= elt
    elt.style.top = ev.mouse.y-int(ev.target.style.top)
    elt.style.left = ev.mouse.x-int(ev.target.style.left)
    elt.style.backgroundColor = ev.target.style.backgroundColor
    if ev.target==right2:
        elt.style.color = 'white'
    else:
        elt.style.color = 'black'
    ev.target.style.borderWidth = 0

for zone in right,left,right2:
    zone.ondragenter = enter
    zone.ondragover = drag_over
    zone.ondragleave = leave
    zone.ondrop = drop

</script>
</body>
</html>